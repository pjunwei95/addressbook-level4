<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.3">
<title>Yang Minxing - Project Portfolio</title>
<link rel="stylesheet" href="../stylesheets/gh-pages.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
<link rel="stylesheet" href="../stylesheets/coderay-asciidoctor.css">
</head>
<body class="article">
<div id="header">
<h1>Yang Minxing - Project Portfolio</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="project-weaver"><a class="link" href="#project-weaver">Project: Weaver</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Weaver is a desktop address book application. The user interacts with it using a CLI, and it has a GUI created with JavaFX. It is written in Java, and has about 12 kLoC.
It helps students store and manage contact information. It satisfies almost all functions might be needed by university students on storing and managing contact information.</p>
</div>
<div class="paragraph">
<p><strong>Code contributed</strong>: [<a href="https://github.com/CS2103AUG2017-W13-B2/main/blob/master/collated/main/yangminxingnus.md">Code contributed</a>] [<a href="https://github.com/CS2103AUG2017-W13-B2/main/blob/master/collated/test/yangminxingnus.md">Test code</a>]</p>
</div>
<div class="sect2">
<h3 id="enhancement-added-remark-modulist"><a class="link" href="#enhancement-added-remark-modulist">Enhancement Added: Remark(modulist)</a></h3>
<div class="sect3">
<h4 id="external-behavior"><a class="link" href="#external-behavior">External behavior</a></h4>
<hr>
<div class="paragraph">
<p><mark>Start of Extract [from: User Guide]</mark></p>
</div>
<div class="paragraph">
<p><mark>End of Extract</mark></p>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="justification"><a class="link" href="#justification">Justification</a></h4>
<div class="paragraph">
<p>This feature will be frequently used by most of the university students. And it&#8217;s the pre-resquisite for the nusmods integration.</p>
</div>
</div>
<div class="sect3">
<h4 id="implementation"><a class="link" href="#implementation">Implementation</a></h4>
<hr>
<div class="paragraph">
<p><mark>Start of Extract [from: User Guide]</mark></p>
</div>
<div class="paragraph">
<p><mark>End of Extract</mark></p>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="enhancement-added-nusmods"><a class="link" href="#enhancement-added-nusmods">Enhancement Added: nusmods</a></h3>
<div class="sect3">
<h4 id="external-behavior-2"><a class="link" href="#external-behavior-2">External behavior</a></h4>
<hr>
<div class="paragraph">
<p><mark>Start of Extract [from: User Guide]</mark></p>
</div>
<div class="paragraph">
<p><mark>End of Extract</mark></p>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="justification-2"><a class="link" href="#justification-2">Justification</a></h4>
<div class="paragraph">
<p>{Justify the need for, and the current design (i.e. external behavior) of, the feature}</p>
</div>
</div>
<div class="sect3">
<h4 id="implementation-2"><a class="link" href="#implementation-2">Implementation</a></h4>
<hr>
<div class="paragraph">
<p><mark>Start of Extract [from: Developer Guide]</mark></p>
</div>
<div class="paragraph">
<p><mark>End of Extract</mark></p>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="enhancement-added-register"><a class="link" href="#enhancement-added-register">Enhancement Added: register</a></h3>
<div class="sect3">
<h4 id="external-behavior-3"><a class="link" href="#external-behavior-3">External behavior</a></h4>
<hr>
<div class="paragraph">
<p><mark>Start of Extract [from: User Guide]</mark></p>
</div>
<div class="paragraph">
<p><mark>End of Extract</mark></p>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="justification-3"><a class="link" href="#justification-3">Justification</a></h4>
<div class="paragraph">
<p>{Justify the need for, and the current design (i.e. external behavior) of, the feature}</p>
</div>
</div>
<div class="sect3">
<h4 id="implementation-3"><a class="link" href="#implementation-3">Implementation</a></h4>
<hr>
<div class="paragraph">
<p><mark>Start of Extract [from: Developer Guide]</mark></p>
</div>
<div class="paragraph">
<p><mark>End of Extract</mark></p>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="enhancement-added-but-not-used-encryption-decryption"><a class="link" href="#enhancement-added-but-not-used-encryption-decryption">Enhancement Added but not used: Encryption/Decryption</a></h3>
<div class="sect3">
<h4 id="external-behavior-4"><a class="link" href="#external-behavior-4">External behavior</a></h4>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="encrypt-decrypt-user-s-file"><a class="link" href="#encrypt-decrypt-user-s-file">Encrypt / Decrypt user&#8217;s file</a></h3>
<div class="paragraph">
<p>This feature have no commands, it&#8217;s embedded inside the software. When a user logout from his account,
the system will encrypt his file, make it human unreadable. And before he login, the system
will decrypt the file and make it readable for him. This mechanism is originally designed
due to the existence of the login feature. Because we want the files to be both unreadable and unreachable
if someone don&#8217;t have the account.</p>
</div>
</div>
<div class="sect2">
<h3 id="implementation-4"><a class="link" href="#implementation-4">Implementation</a></h3>
<div class="paragraph">
<p>On click of a person&#8217;s panel, this person&#8217;s module lists will be list out in the panel.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">/**
 * method for encrypt / decrypt the files
 */</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">CipherUnit</span> {
    <span class="directive">private</span> <span class="directive">static</span> <span class="predefined-type">String</span> key = <span class="string"><span class="delimiter">&quot;</span><span class="content">squirrel123</span><span class="delimiter">&quot;</span></span>; <span class="comment">// needs to be at least 8 characters for DES</span>
    <span class="directive">private</span> <span class="directive">static</span> <span class="predefined-type">String</span> dest;

    <span class="comment">/**
    * class for encrypting files
    */</span>
    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> encrypt(<span class="predefined-type">String</span> path) {
        <span class="keyword">try</span> {
            dest = path;
            <span class="predefined-type">FileInputStream</span> fis = <span class="keyword">new</span> <span class="predefined-type">FileInputStream</span>(path);
            <span class="predefined-type">FileOutputStream</span> fos = <span class="keyword">new</span> <span class="predefined-type">FileOutputStream</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">data/temp.xml</span><span class="delimiter">&quot;</span></span>);
            encryptOrDecrypt(key, <span class="predefined-type">Cipher</span>.ENCRYPT_MODE, fis, fos);
            swapName(<span class="string"><span class="delimiter">&quot;</span><span class="content">data/temp.xml</span><span class="delimiter">&quot;</span></span>);
        } <span class="keyword">catch</span> (<span class="predefined-type">Throwable</span> e) {
            e.printStackTrace();
        }

    }

    <span class="comment">/**
    * class for decrypting files
    */</span>
    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> decrypt(<span class="predefined-type">String</span> path) {
        <span class="keyword">try</span> {
            dest = path;
            <span class="predefined-type">FileInputStream</span> fis = <span class="keyword">new</span> <span class="predefined-type">FileInputStream</span>(path);
            <span class="predefined-type">FileOutputStream</span> fos = <span class="keyword">new</span> <span class="predefined-type">FileOutputStream</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">data/temp.xml</span><span class="delimiter">&quot;</span></span>);
            encryptOrDecrypt(key, <span class="predefined-type">Cipher</span>.DECRYPT_MODE, fis, fos);
            swapName(<span class="string"><span class="delimiter">&quot;</span><span class="content">data/temp.xml</span><span class="delimiter">&quot;</span></span>);
        } <span class="keyword">catch</span> (<span class="predefined-type">Throwable</span> e) {
            e.printStackTrace();
        }

    }

    <span class="comment">/**
    * translating method
    */</span>
    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> encryptOrDecrypt(<span class="predefined-type">String</span> key, <span class="type">int</span> mode, <span class="predefined-type">InputStream</span> is, <span class="predefined-type">OutputStream</span> os) <span class="directive">throws</span> <span class="predefined-type">Throwable</span> {

        <span class="predefined-type">DESKeySpec</span> dks = <span class="keyword">new</span> <span class="predefined-type">DESKeySpec</span>(key.getBytes());
        <span class="predefined-type">SecretKeyFactory</span> skf = <span class="predefined-type">SecretKeyFactory</span>.getInstance(<span class="string"><span class="delimiter">&quot;</span><span class="content">DES</span><span class="delimiter">&quot;</span></span>);
        <span class="predefined-type">SecretKey</span> desKey = skf.generateSecret(dks);
        <span class="predefined-type">Cipher</span> cipher = <span class="predefined-type">Cipher</span>.getInstance(<span class="string"><span class="delimiter">&quot;</span><span class="content">DES</span><span class="delimiter">&quot;</span></span>); <span class="comment">// DES/ECB/PKCS5Padding for SunJCE</span>

        <span class="keyword">if</span> (mode == <span class="predefined-type">Cipher</span>.ENCRYPT_MODE) {
            cipher.init(<span class="predefined-type">Cipher</span>.ENCRYPT_MODE, desKey);
            <span class="predefined-type">CipherInputStream</span> cis = <span class="keyword">new</span> <span class="predefined-type">CipherInputStream</span>(is, cipher);
            doCopy(cis, os);
        } <span class="keyword">else</span> <span class="keyword">if</span> (mode == <span class="predefined-type">Cipher</span>.DECRYPT_MODE) {
            cipher.init(<span class="predefined-type">Cipher</span>.DECRYPT_MODE, desKey);
            <span class="predefined-type">CipherOutputStream</span> cos = <span class="keyword">new</span> <span class="predefined-type">CipherOutputStream</span>(os, cipher);
            doCopy(is, cos);
        }
    }

    <span class="comment">/**
    * do a copy
    */</span>
    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> doCopy(<span class="predefined-type">InputStream</span> is, <span class="predefined-type">OutputStream</span> os) <span class="directive">throws</span> <span class="exception">IOException</span> {
        <span class="type">byte</span><span class="type">[]</span> bytes = <span class="keyword">new</span> <span class="type">byte</span>[<span class="integer">64</span>];
        <span class="type">int</span> numBytes;
        <span class="keyword">while</span> ((numBytes = is.read(bytes)) != -<span class="integer">1</span>) {
            os.write(bytes, <span class="integer">0</span>, numBytes);
        }
        os.flush();
        os.close();
        is.close();
    }

    <span class="comment">/**
    * used to replace files encypted/decrypted with the dectypted/encrypted one.
    */</span>
    <span class="directive">public</span> <span class="directive">static</span> <span class="type">boolean</span> swapName(<span class="predefined-type">String</span> source) {
        <span class="predefined-type">File</span> tmp = <span class="keyword">new</span> <span class="predefined-type">File</span>(source);

        <span class="predefined-type">File</span> swapFile1 = <span class="keyword">new</span> <span class="predefined-type">File</span>(dest);

        <span class="keyword">return</span> tmp.renameTo(swapFile1);

    }

}</code></pre>
</div>
</div>
<hr>
<div class="sect3">
<h4 id="consideration"><a class="link" href="#consideration">Consideration</a></h4>
<div class="paragraph">
<p>However, this feature is not working well crossing operation systems.
As you can see from the code above, the file ecryption / decryption is implemented
in a way that the data are read and operated then stored into aonther file called
temp.xml first. Then I replace the file name using the original file name to try to
replace the file with the original one. This is because I tried to achieve that the encryption / decryption
is done like "within the same file". However, different operating system have different
ways to decide wether to replace a file or not. Therefore on OSX, it works well. But on windows, the replacing
failed. It won&#8217;t influence user until he tries to login another account. The temp.xml
will be replaced because it was kept separately when I tried to replace it to another file.</p>
</div>
<div class="paragraph">
<p>So I decided to delete this feature in current version. I&#8217;ll try to figure out better ways and add it
back in feature 2.0.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="other-contributions"><a class="link" href="#other-contributions">Other contributions</a></h3>
<div class="ulist">
<ul>
<li>
<p>Wrote additional tests to increase coverage.</p>
</li>
<li>
<p>Help change friends' code structure.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2017-11-08 07:42:47 +00:00
</div>
</div>
</body>
</html>